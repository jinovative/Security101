암호화는 잘못 구현되면 **보안 약점**이 생깁니다.  
시험에서 자주 묻는 건 **“문제가 발생했을 때 어떻게 대처하느냐”**입니다.

---

## 🔎 **자주 발생하는 암호화 문제와 원인**

| 문제                          | 원인                      | 해결책/설명                        |
| --------------------------- | ----------------------- | ----------------------------- |
| **인증서 오류**                  | 만료됨 / 신뢰 안 됨 / 잘못된 도메인  | 인증서 갱신, 신뢰 체인 검증              |
| **취약한 암호화 알고리즘 사용**         | MD5, SHA-1, DES 사용      | **SHA-256 이상**, **AES** 권장    |
| **키 관리 실패**                 | 키 유출 / 키 재사용 / 키 만료 안 함 | 키 롤오버(정기적 변경), HSM 사용         |
| **미스매치된 암호화 설정**            | 서버-클라이언트 간 프로토콜 불일치     | 서로 같은 프로토콜/버전 사용 (예: TLS 1.3) |
| **대칭/비대칭 키 오용**             | 암호화 목적에 맞지 않게 사용        | 비대칭: 키 교환/서명, 대칭: 대량 데이터 암호화  |
| **약한 랜덤 숫자 생성기(PRNG)**      | 예측 가능한 랜덤 값 사용          | **CSPRNG** (암호학적 난수) 사용       |
| **키 길이 부족**                 | 1024-bit RSA 사용 등       | **2048-bit 이상 RSA**, ECC 권장   |
| **암호화가 안 됨 (plaintext 저장)** | 저장/전송 시 암호화 누락          | 전송 + 저장 모두 암호화 적용             |
| **해시 충돌**                   | 약한 해시 알고리즘 사용           | SHA-256 이상 사용                 |
| **패딩 오류**                   | PKCS#7 오류 등             | 올바른 암호화 모드와 패딩 사용             |
| **중복 IV 사용**                | CBC 모드에서 IV 재사용         | IV는 매번 새로 생성                  |

---

## 🧰 **암호화 문제별 원인-대응표**

|문제 유형|원인|대응|
|---|---|---|
|**인증서 오류**|만료/루트 인증서 없음|인증서 갱신, 루트 인증서 설치|
|**암호화 프로토콜 불일치**|서버/클라이언트 설정 차이|양쪽 버전 확인, TLS 1.3 권장|
|**취약한 알고리즘**|MD5/SHA-1/DES|SHA-256, AES-256 사용|
|**키 관리 실패**|키 유출/만료 관리 안됨|키 주기적 갱신, HSM 사용|
|**랜덤값 예측됨**|잘못된 PRNG 사용|CSPRNG로 교체|
|**암호화 누락**|데이터 평문 저장|전송 + 저장 암호화 적용|

---

## 🧪 **시험 대비 포인트**

- **취약한 암호화 알고리즘 = 출제 단골**  
    → **MD5, SHA-1, DES** 쓰면 문제 발생
    
- **대칭/비대칭 헷갈리지 말 것**  
    → 비대칭: 키 교환, 서명 / 대칭: 데이터 암호화
    
- **키 관리도 보안의 일부**  
    → 키 유출 = 암호화 실패와 동일
    
- **인증서 문제 해결법 숙지**  
    → 만료 / 루트 인증서 부재 / 이름 불일치
    
- **IV, 패딩, 키 길이 체크**  
    → CBC IV 재사용 금지 / AES 128이상 / RSA 2048 이상
    

---

# 🧪 7.4 실전 스타일 퀴즈 (5문제)

---

### **Q1.**

어떤 회사가 아직도 **MD5**를 사용해 패스워드를 해시하고 있습니다.  
이로 인해 발생할 수 있는 문제는?

A. IV 재사용 문제  
B. 해시 충돌 발생 가능  
C. 인증서 만료  
D. 키 교환 실패

✅ **Answer: B. 해시 충돌 발생 가능**  
➡ MD5는 충돌이 잘 발생함

---

### **Q2.**

암호화 통신 중 다음 오류가 발생했습니다:  
**“Protocol Version Mismatch”**  
가장 가능한 원인은?

A. 키 유출  
B. 서로 다른 암호화 버전 사용  
C. 랜덤값 예측됨  
D. 패딩 오류

✅ **Answer: B. 서로 다른 암호화 버전 사용**  
➡ TLS 1.3 vs TLS 1.2 같은 상황

---

### **Q3.**

CBC 모드에서 **IV(Initialization Vector)를 재사용**하면 어떤 문제가 발생합니까?

A. 키가 만료됨  
B. 인증서가 무효화됨  
C. 동일한 평문이 같은 암호문으로 암호화됨  
D. 키 교환 실패

✅ **Answer: C. 동일한 평문이 같은 암호문으로 암호화됨**  
➡ 암호문 패턴 노출됨

---

### **Q4.**

서버의 TLS 인증서가 만료되었을 때 사용자에게 보이는 경고는?

A. 암호화 알고리즘 취약  
B. 인증서 유효성 검사 실패  
C. 랜덤값 충돌  
D. IV 재사용

✅ **Answer: B. 인증서 유효성 검사 실패**  
➡ 브라우저에서 보통 빨간 경고창 나옴

---

### **Q5.**

암호화 구현에서 **CSPRNG**를 사용하는 이유는?

A. 메모리 절약  
B. 키 관리 간소화  
C. 예측 불가능한 랜덤값 생성  
D. 암호화 속도 향상

✅ **Answer: C. 예측 불가능한 랜덤값 생성**  
➡ CSPRNG = Cryptographically Secure Pseudo-Random Number Generator

---

## ✅ **정리 요약**

| 암호화 문제       | 키워드                |
| ------------ | ------------------ |
| 인증서 오류       | 만료, 루트 인증서 없음      |
| 약한 알고리즘      | MD5, SHA-1, DES 금지 |
| 키 관리 실패      | 키 유출, 롤오버 필요       |
| 암호화 프로토콜 불일치 | TLS 버전 mismatch    |
| IV 재사용       | CBC 모드에서 보안 위험     |
| CSPRNG 필요    | 안전한 랜덤값            |