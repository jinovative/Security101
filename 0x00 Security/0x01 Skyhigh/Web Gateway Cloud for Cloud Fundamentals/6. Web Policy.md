이전 PART에서 SWG (Secure Web Gateway)의 기본 설정과 SCP (Skyhigh Client Proxy)에 대해 알아보았습니다. 이제 그 지식을 바탕으로, 사용자의 웹 접근을 실제로 통제하고 보호하는 **웹 정책(Web Policy)** 을 어떻게 만들고 관리하는지 심층적으로 살펴보겠습니다. 웹 정책은 마치 교통 법규와 같아서, 어떤 트래픽을 허용하고, 어떤 트래픽을 차단하며, 어떤 조건에서 경고를 보낼지 등을 정의하는 규칙들의 집합입니다.

#### 📚 6.1 웹 정책 모델 이해: 규칙, 목록, 설정의 조화

Skyhigh SWG의 웹 정책 모델은 조직 전체에 **전역적으로(globally)** 적용되는 **하나의 통합된 정책**을 기반으로 합니다. 이 웹 정책은 크게 세 가지 요소로 구성됩니다:

1. **규칙 (Rules):** 웹 트래픽을 필터링하여 특정 웹 콘텐츠, 애플리케이션, 객체 등에 대한 접근을 허용하거나 차단하는 구체적인 조건과 조치입니다.
    
2. **목록 (Lists):** 규칙에서 자주 사용되는 항목들(예: URL, IP 주소, 사용자 그룹)을 모아놓은 것으로, 정책 구성을 단순화하고 일관성을 유지하는 데 도움을 줍니다.
    
3. **설정 (Settings):** 안티 멀웨어 엔진, SSL 검사 옵션 등 정책 규칙과 관련된 다양한 보안 기능 모듈의 세부 설정을 의미합니다.
    

이 세 가지 요소들이 유기적으로 결합하여 웹 정책을 이루며, **정책 (Policy) 메뉴 > 웹 정책 (Web Policy)** 섹션에서 이 모든 것을 구성하고 관리합니다.

---

#### 📚 6.2 웹 정책 UI (User Interface) 활용법: 정책 관리의 조종석

웹 정책 UI는 정책을 시각적으로 구성하고 관리할 수 있는 인터페이스입니다. 이 화면을 통해 정책 규칙을 만들고, 편집하며, 적용 순서를 정하는 등 모든 정책 관련 작업을 수행하게 됩니다.

- **왜 웹 정책 UI가 중요한가?** 복잡할 수 있는 정책 규칙들을 체계적으로 관리하고, 현재 어떤 정책이 어떻게 적용되고 있는지 한눈에 파악할 수 있도록 도와주기 때문입니다. UI를 잘 이해하고 활용하는 것이 효율적인 정책 관리의 첫걸음입니다.
- **웹 정책 UI의 주요 구성 영역**:
    
    1. **정책 트리 (Policy Tree):** 화면 왼쪽에 위치하며, 규칙 세트 그룹(Rule Set Groups)과 그 안의 규칙 세트(Rule Sets)들이 계층적인 트리 구조로 표시됩니다. 여기서 특정 규칙 세트를 선택하면 해당 규칙 세트에 포함된 규칙들을 중앙 화면에서 볼 수 있습니다.
        
        - **규칙 세트 (Rule Sets):** 유사한 유형의 규칙들을 논리적으로 묶어놓은 단위입니다. 예를 들어, 'HTTPS 스캐닝' 규칙 세트 그룹 아래에는 'HTTPS 연결 옵션', '인증서 검증', 'HTTPS 복호화'와 같은 규칙 세트들이 있을 수 있습니다.
            
        - **규칙 세트 추가/관리:**
            - 많은 규칙 세트들이 기본적으로 설치되어 제공됩니다.
                
            - 새로운 SSE 릴리스에서 추가되거나 업데이트된 규칙 세트, 또는 아직 사용하지 않는 규칙 세트들은 **웹 정책 (Web Policy) > 시작하기 (Getting Started) > 개요 (Overview)** 섹션에 표시되며, 여기서 정책 트리에 추가할 수 있습니다.
                
            - 또는, 정책 트리에서 특정 규칙 세트 그룹 옆의 메뉴 아이콘(...)을 클릭하여 '새 규칙 세트 추가(Add New Ruleset)'를 선택할 수도 있습니다. 예를 들어, '애플리케이션 제어' 그룹에 새로 추가된 'YouTube 제어' 규칙 세트를 추가할 수 있습니다.
                
            - 기본 규칙 세트를 복제(clone)하고 편집하거나 이름을 변경하여 템플릿처럼 사용할 수 있으며, 완전히 새로운 규칙 세트를 기본 설정으로 만들 수도 있습니다.
                
            - 하나의 규칙 세트 그룹에는 일반적으로 각 유형의 규칙 세트가 하나씩 포함되지만, 필요에 따라 (예: 지역별 정책 차등화) 동일한 종류의 규칙 세트를 여러 개 만들어 사용할 수도 있습니다.
                
    2. **작업 (Actions):** 선택한 정책 트리 브랜치(규칙 세트 그룹)나 규칙 세트에 대한 추가 작업을 수행할 수 있는 드롭다운 메뉴입니다.
        
        - **주요 작업:** 브랜치/규칙 세트 복제(Clone Branch/Rule Set), 삭제(Delete), 편집(Edit) 등이 있습니다. 이 옵션들은 정책 트리에서 각 항목 옆의 메뉴 아이콘(...)을 클릭해도 접근 가능합니다.
            
    3. **범위 (Scope):** 선택한 규칙 세트의 규칙들이 어떤 트래픽에 적용될지를 정의하는 영역입니다.
        
        - **기본 적용 범위:** 규칙 세트 내의 규칙들은 기본적으로 모든 웹 트래픽에 적용됩니다.
            
        - **범위 제한:** '편집(Edit)'을 클릭하여 다음 기준들을 선택하고 구성함으로써 각 규칙 세트의 적용 범위를 제한할 수 있습니다:
            
            - 위치 (Location)
            - 클라이언트 IP (Client IP)
            - 연결 IP (Connection IP)
            - 사용자 그룹 (User group)
            - 사용자 이름 (User name)
            - 서비스 (Service)
            - 서비스 그룹 (Service Group)
            - URL/도메인 호스트 (URL/Domain Host)
                
            - 프로세스 (Processes)
                
    4. **규칙 (Rules):** 선택한 규칙 세트에 포함된 개별 규칙들의 목록과 상세 설정이 표시되는 중앙 영역입니다.
        
        - 웹 정책은 하나 이상의 규칙으로 구성되며, 각 규칙은 필터링 활동(허용, 차단 등)을 정의합니다.
            
        - 규칙들은 일반적으로 **목록(Lists)** 을 참조하여, 공통된 값들을 여러 규칙에서 재사용할 수 있도록 합니다.
            
        - 규칙 세트들은 정책 트리 위에서 아래로 순서대로 적용됩니다. '차단(Block)' 또는 '우회(Bypass)' 규칙 조치에 의해 처리가 중단되거나 모든 규칙 세트가 적용될 때까지 위에서 아래로 평가가 진행됩니다.
            
    5. **코드 보기 (Code View):** (고급 사용자용) 웹 정책 규칙의 기반이 되는 실제 정책 코드를 직접 보고 편집할 수 있는 기능입니다.
        
        - 이 기능을 사용하려면 '웹 정책 코드(Web Policy Code)' 권한이 필요합니다.
            
        - 문제 해결이나 복잡한 정책 로직 구현에 유용할 수 있지만, 신중한 사용이 요구됩니다.
            
        - 코드는 독자적인 프로그래밍 구문을 사용하며, 함수, 프로시저, 네임스페이스, 객체 지향 언어와 유사한 DOT 표기법 등을 포함합니다.
            
    6. **상태 (Status):** 선택한 정책 트리 브랜치(규칙 세트 그룹) 또는 개별 규칙 세트의 활성화/비활성화 상태를 보여주고 변경할 수 있는 토글입니다. 이를 통해 개별 규칙들을 일일이 켜고 끄지 않고도 특정 정책 그룹 전체의 적용 여부를 쉽게 제어할 수 있습니다.
        
    7. **기능 설정 (Feature Configuration):** 선택한 규칙 세트와 관련된 보안 기능 모듈(엔진)의 현재 설정을 보여주고, 변경할 수 있도록 연결해주는 영역입니다.
        
        - 예를 들어, 'HTTPS 연결 옵션' 규칙 세트를 선택하면, 이와 관련된 'HTTPS 연결 기능' 및 '인증서 검증 옵션 기능'의 현재 설정 상태와 변경 링크가 표시될 수 있습니다.
            
        - 모든 기능 설정은 **정책 (Policy) > 웹 정책 (Web Policy) > 기능 설정 (Feature Configuration)** 메뉴에서도 통합적으로 관리할 수 있습니다.
            

---

#### 📚 6.3 목록 카탈로그 (List Catalog) 활용법: 효과적인 정책 관리의 초석

웹 정책 규칙을 만들다 보면, 특정 URL 목록, IP 주소 목록, 사용자 그룹 목록 등 반복적으로 사용되는 값들이 많습니다. **목록 카탈로그(List Catalog)** 는 이러한 값들을 미리 목록 형태로 정의하고 관리할 수 있는 중앙 저장소 역할을 합니다.

- **왜 목록 카탈로그가 중요한가?**
    - **정책 구성 단순화:** 자주 사용되는 항목들을 목록으로 만들어두면, 규칙을 만들 때마다 일일이 입력할 필요 없이 해당 목록을 선택하기만 하면 됩니다.
        
    - **일관성 유지:** 동일한 목적의 값들이 여러 규칙에서 일관되게 사용되도록 보장합니다. 예를 들어, '차단할 악성 도메인 목록'을 하나 만들어두고 여러 규칙에서 참조하면, 목록만 업데이트해도 모든 관련 규칙에 변경 사항이 자동으로 반영됩니다.
    - **관리 효율성 향상:** 목록을 중앙에서 관리하므로, 값 변경이나 추가/삭제가 용이합니다.
- **접근 경로:** **정책 (Policy) > 웹 정책 (Web Policy) > 목록 카탈로그 (List Catalog)**.
    
- **목록 카탈로그의 구성:**
    - 다양한 유형의 목록(예: 문자열, 정규 표현식, IP 주소, URL 카테고리, 미디어 유형 등)을 카테고리별로 관리합니다.
        
    - 각 카테고리에는 **사용자 정의 목록(User Maintained Lists)** 과 **Skyhigh 유지 관리 목록(Skyhigh Maintained Lists)** 이 포함될 수 있습니다.
        
        - **Skyhigh 유지 관리 목록:** Skyhigh Security가 자동으로 업데이트하고 제공하는 목록입니다. 사용자는 이 목록의 내용을 변경하거나 삭제할 수 없습니다. URL에 "Skyhigh_" 또는 "SWG_" 접두사가 붙어 식별할 수 있습니다.
            
        - **사용자 정의 목록:** 사용자가 직접 생성하고 관리하는 목록입니다. 초기에는 비어 있으며, 사용자가 직접 항목을 추가하거나 .csv 파일로 가져올 수 있습니다.
            
- **새 목록 추가하기 (텍스트로 시각화된 절차):**
    1. **목록 카탈로그로 이동:** **정책 (Policy) > 웹 정책 (Web Policy) > 목록 카탈로그 (List Catalog)** 로 이동합니다.
        
    2. **카테고리 선택:** 추가하려는 목록의 유형에 맞는 카테고리(예: 문자열(String), IP 주소(IP) 등)를 선택합니다.
        
    3. **'새 목록 추가' 선택:** 선택한 카테고리 옆의 메뉴 아이콘(...)을 클릭한 후, '새 목록 추가 (Add New List)'를 선택합니다.
        
    4. **목록 이름 및 설명 입력:** 새 목록의 이름을 입력하고, 필요에 따라 설명을 추가합니다.
        
    5. **항목 추가:** '작업(Actions)' 메뉴 또는 '+' 아이콘을 사용하여 목록에 항목을 추가합니다.
        
        - **새 항목 추가 (Add New Items):** 한 번에 하나의 항목을 직접 입력하여 추가합니다.
        - **CSV로 가져오기 (Import - Append with .CSV / Import - Replace with .CSV):** .csv 파일에 있는 여러 항목을 한 번에 가져올 수 있습니다. 기존 목록에 추가하거나, 기존 항목을 대체할 수 있습니다.
            
    6. **저장 (Save):** 목록 생성을 완료하려면 '저장'을 클릭합니다.
        
    7. **게시 (Publish) 또는 계속 작업 (Keep Working):** 변경 사항을 웹 정책에 즉시 적용하려면 '게시'를, 추가 작업을 위해 로컬에만 저장하려면 '계속 작업'을 선택합니다.
        
- **.CSV 파일을 사용하여 목록 편집하기:**
    - 사용자 정의 목록에 .csv 파일로부터 항목을 가져와 추가하거나 대체할 수 있습니다.
        
    - **.csv 파일 요구 사항**:
        
        - 한 줄에 하나의 목록 항목이 있어야 합니다.
            
        - 열은 공백, 탭, 쉼표, 세미콜론 또는 사용자 지정 문자로 구분되어야 합니다.
            
        - 문자 인코딩은 UTF-8이어야 합니다.
            
        - 목록 항목에 열 구분 기호가 포함된 경우 백슬래시() 문자를 사용하여 이스케이프 처리할 수 있습니다.
            
    - **가져오기 절차 (텍스트로 시각화된 절차):**
        1. 목록 카탈로그에서 편집할 목록을 선택합니다.
            
        2. '작업(Actions)' 드롭다운 목록에서 가져오기 옵션('CSV로 가져오기 - 추가' 또는 'CSV로 가져오기 - 바꾸기')을 선택합니다.
            
        3. 파일 브라우저에서 가져올 .csv 파일을 선택합니다.
            
        4. 'CSV 가져오기 설정' 대화 상자에서 열 구분 기호를 선택하고, 헤더 행 포함 여부, 특정 문자로 시작하는 줄 무시 등의 옵션을 구성합니다.
            
        5. '가져오기(Import)'를 클릭한 후 '저장(Save)'을 클릭합니다.
            
- **주요 목록 유형 간단 소개:**
    - **문자열 목록 (String Lists):** 텍스트 문자열 목록 (예: 차단할 특정 웹사이트 주소, 파일 이름).
        
    - **정규식 목록 (Regex Lists):** 특정 패턴과 일치하는 문자열을 찾기 위한 정규 표현식 목록 (예: 특정 형식의 주민등록번호 패턴).
        
    - **스마트 매치 목록 (Smart Match):** URL, 호스트 이름, IP 주소가 혼합된 목록으로, 스마트 매치를 지원하는 정책 규칙 및 기능에서 사용됩니다.
        
    - **URL 카테고리 목록 (URL Category):** 웹 정책 규칙에 사용될 URL 유형 목록 (예: 비즈니스/서비스, 금융/뱅킹 등).
        
    - **미디어 유형 카탈로그 (Media Type Catalog):** 파일의 종류를 나타내는 미디어 유형 목록 (예: application/x-bcpio (아카이브), application/pdf (PDF 문서)).
        
    - **IP 목록 (IP Lists):** 개별 IPv4 또는 IPv6 주소 목록 (예: 신뢰할 수 있는 특정 서버 IP).
        
    - **IP 범위 목록 (IP Range):** IP 주소 범위 목록 (예: 특정 국가의 IP 대역).
        
    - **숫자 목록 (Number):** 숫자 값 목록 (예: 허용할 포트 번호).
        
    - **호스트 및 인증서 목록 (Host and Certification):** 호스트 이름과 인증서 쌍 목록으로, 만료되었지만 예외적으로 허용해야 하는 인증서 등에 사용될 수 있습니다.
        
    - **인증 기관 목록 (Certificate Authority):** 신뢰할 수 있는 루트 CA 또는 블랙리스트에 오른 CA 목록.
        
    - **Private Access 애플리케이션 목록 (Private Access Application List):** Private Access (ZTNA) 구현 시 허용하거나 거부할 애플리케이션 목록.
        
    - **RBI 클립보드 목록 (RBI Clipboard):** 원격 브라우저 격리(RBI) 활성 시 클립보드 접근을 허용/차단할 애플리케이션 목록.
        
    - **RBI 파일 전송 목록 (RBI File Transfer):** RBI 활성 시 파일 업로드/다운로드를 허용/차단할 도메인 목록.
        

---

#### 📚 6.4 기능 설정 (Feature Configuration): 보안 엔진의 세부 조정

**기능 설정(Feature Configuration)** 은 웹 정책 규칙의 실제 필터링이나 스캔 동작을 수행하는 다양한 엔진 또는 모듈의 세부 설정을 구성하는 곳입니다.

- **왜 기능 설정이 중요한가?** 동일한 규칙이라도 내부 엔진 설정에 따라 그 효과와 성능이 달라질 수 있습니다. 예를 들어, 안티 멀웨어 기능의 민감도 수준, SSL 검사 시 예외 처리 조건 등을 이곳에서 조정하여 조직의 특성과 보안 요구 수준에 맞게 최적화할 수 있습니다.
- **접근 경로:** **정책 (Policy) > 웹 정책 (Web Policy) > 기능 설정 (Feature Configuration)**.
    
- **기능 설정 UI 활용:**
    - **새 구성 만들기:** 기능을 선택한 후 '새 구성(New Configuration)'을 클릭합니다.
        
    - **구성 복제 및 편집:** 기본 또는 사용자 정의 구성을 선택하고 '작업(Actions)' 드롭다운 목록에서 '복제 및 편집(Clone and edit)'을 선택하여 기존 설정을 기반으로 새 설정을 만듭니다.
        
    - **구성을 기본값으로 재설정:** 사용자 정의 구성을 선택하고 '기본값으로 재설정(Reset to Default)'을 선택합니다.
        
    - **구성 삭제:** 사용자 정의 구성을 선택하고 '삭제(Delete)'를 선택합니다.
        
- **주요 기능 설정 항목 예시:**
    - **기본 설정이 제공되는 기능들 (Default settings provided):**
        - 안티 멀웨어 (Anti-Malware for GAM)
            
        - 인증서 검증 (Certificate Verification)
            
        - 복합 파일 오프너 (Composite Opener - 압축 파일 내부 검사 관련)
            
        - 데이터 트리클링 (Data Trickling - 대용량 파일 다운로드 시 사용자 경험 향상 관련)
            
        - HTTPS 복호화 (HTTPS Decryption)
            
        - 웹 필터링 (Web Filtering - GTI 설정 등)
            
    - **조직별 설정이 필요한 기능들 (Configuration required):**
        - DLP 분류 (DLP Classification)
            
        - DLP 사전 (DLP Dictionaries)
            
        - ICAP 서버 (ICAP Server - 외부 DLP 솔루션 연동 등)
            
        - HTTPS 연결 (HTTPS Connection - 고객 CA 사용 시)
            
        - 다음 홉 프록시 (Next Hop Proxy - 다른 프록시 서버로 트래픽 전달 시)
            

---

#### 📚 6.5 최종 사용자 알림 페이지 (End User Notification Pages): 정책 적용 결과 친화적으로 안내하기

사용자의 웹 접근이 보안 정책에 의해 차단될 경우, 사용자에게 보여지는 차단 페이지(Block Page)를 조직의 특성에 맞게 수정할 수 있습니다.

- **왜 중요한가?** 무뚝뚝한 차단 메시지 대신, 회사 로고와 함께 명확한 차단 사유, 그리고 필요한 경우 문의할 수 있는 IT 지원팀 정보 등을 제공함으로써 사용자의 혼란을 줄이고, IT 부서로의 불필요한 문의를 감소시키며, 보안 정책에 대한 사용자의 수용도를 높일 수 있습니다.
    
- **접근 경로:** (일반적으로) **정책 (Policy) 메뉴 > 최종 사용자 알림 페이지 (End User Notification Pages) 또는 블록 페이지 템플릿 (Block Page Templates)**. (문서 Page 13의 'End User Notification Pages' 참조)
- **주요 기능:**
    - 차단 페이지의 텍스트 내용 편집
    - 회사 로고 이미지 삽입
    - IT 헬프데스크 연락처 정보 추가
    - 다양한 차단 시나리오별(예: 악성코드 차단, 유해 사이트 차단, DLP 정책 위반 차단 등) 맞춤형 페이지 설정

---

#### 📚 6.6 웹 정책 변경사항 게시하기 (Publishing Web Policy): 로컬 설정을 클라우드에 적용

웹 정책 설정, 목록, 기능 설정 등을 변경하면 이러한 변경 사항은 우선 로컬 데이터베이스에 저장됩니다. 규칙 세트 변경은 자동으로 저장되지만, 목록이나 기능 설정 변경은 수동으로 저장해야 할 수 있습니다.

- **왜 게시 과정이 필요한가?** 로컬에 저장된 변경 사항은 아직 실제 트래픽에 적용되지 않은 상태입니다. 이러한 변경 사항들을 **전역적으로(globally)** 모든 사용자에게 적용하려면, 이를 클라우드의 **글로벌 정책 저장소(Global Policy Store)** 로 **게시(Publish)** 해야 합니다.
    
- **게시 알림 및 옵션:** 웹 정책 관련 페이지(웹 게이트웨이 설정, 웹 정책 UI 등)에서 어떤 변경이라도 발생하면, 화면 상단이나 특정 위치에 다음과 같은 알림과 함께 선택 옵션이 나타납니다:
    
    - **"정책 변경 사항을 클라우드에 게시해야 합니다." (Changes to policy need to be published to the cloud)**
    - **게시 (Publish):** 지금까지 로컬에 저장된 모든 변경 사항을 클라우드에 게시하여 실제 정책에 반영합니다.
    - **변경 사항 삭제 (Discard Changes):** 로컬에 저장된 변경 사항을 모두 취소하고, 마지막으로 게시된 정책 상태로 돌아갑니다.
    - **계속 작업 (Keep Working):** 현재 변경 사항을 로컬에 유지한 채, 추가적인 편집 작업을 계속 진행합니다. 아직 게시하지 않습니다.
- **게시 시점:** 단일 변경 후 바로 게시할 수도 있고, 여러 변경 작업을 마친 후 한 번에 모든 변경 사항을 게시할 수도 있습니다.
    

---

#### 📚 6.7 웹 정책 빌더 (Web Policy Builder) 소개: 더 직관적인 규칙 생성 경험 (신규 인터페이스)

Skyhigh Security는 기존의 웹 정책 UI 외에, 더욱 직관적인 규칙 생성 경험을 제공하기 위해 **웹 정책 빌더(Web Policy Builder)** 라는 업데이트된 인터페이스를 제공합니다.

- **특징:**
    - 2023년 봄부터 모든 신규 고객에게 기본으로 포함됩니다.
        
    - 기존 고객이 이 새 인터페이스로 마이그레이션하려면 Skyhigh Security 지원팀에 문의해야 합니다.
        
    - 목록 카탈로그, 기능 설정, 최종 사용자 알림 페이지는 기존과 동일하게 유지됩니다.
        
- **웹 정책 빌더 UI의 주요 구성 요소 (텍스트로 시각화):**
    - **웹 정책 트리 (Web Policy Tree):** 화면 왼쪽의 정책 트리는 기존 UI와 동일하게 유지됩니다.
        
    - **규칙 세트 (Ruleset):** 중앙 화면에 선택된 규칙 세트가 표시됩니다. 규칙들은 규칙 세트 내에 중첩되어 표시됩니다.
        
    - **규칙 (Rules):** 웹 정책 트리에서 특정 규칙을 선택하면 해당 규칙만 중앙에 표시됩니다.
        
    - **규칙 기준/이벤트/작업 (Rule Criteria/Events/Actions):** 규칙을 구성하는 세부 조건, 이벤트, 그리고 수행할 작업을 설정하는 영역입니다. (이 부분은 이후 더 자세히 다룰 수 있습니다).
        
    - **활성화/비활성화 제어 (Enable/Disable Controls):** 각 규칙 또는 규칙 세트별로 '켜기/끄기(On/Off)' 토글 스위치가 제공되어 쉽게 적용 여부를 제어할 수 있습니다.
        
- **규칙/규칙 세트 작업 옵션 (점 세 개 아이콘 클릭 시):**
    
    - **새 규칙 세트 추가 (Add New Ruleset):**
        - 사용자 정의 (Custom)
        - 라이브러리에서 (From Library)
    - **사용자 정의 규칙 추가 (Add Custom Rule):**
        - 규칙 빌더를 통해 (Via Rule Builder)
        - 정책 코드를 통해 (Via Policy Code)
    - **정책 코드 보기 (View Policy Code)**
    - **삭제 (Delete)**