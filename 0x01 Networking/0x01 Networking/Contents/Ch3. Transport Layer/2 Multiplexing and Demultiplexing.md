>[[Transport Layer]]

#### **요약 (Summary)**

전송 계층(Transport Layer)의 **Multiplexing(다중화)과 Demultiplexing(역다중화)**은 여러 애플리케이션이 **동시에 동일한 네트워크 연결을 사용할 수 있도록 관리하는 기능**이다.  
**Multiplexing**은 송신 측에서 여러 애플리케이션의 데이터를 하나의 전송 스트림으로 결합하는 과정이며,  
**Demultiplexing**은 수신 측에서 데이터가 올바른 애플리케이션으로 전달되도록 하는 과정이다.  
각 애플리케이션을 구분하기 위해 **Port Number(포트 번호)**가 사용된다.

---

## **3.2.1 Multiplexing & Demultiplexing 개념**

### **설명 (Explanation)**

### **1️⃣ Multiplexing (다중화) – 송신 측**

- **여러 애플리케이션이 전송 계층을 공유**하며 데이터를 네트워크로 전송할 수 있도록 함.
- 각 애플리케이션의 데이터는 **포트 번호(Port Number)**를 포함하여 전송됨.
- 예: 웹 브라우징(HTTP, 포트 80)과 이메일 >전송(SMTP, 포트 25)이 동시에 실행될 수 있음.

### **2️⃣ Demultiplexing (역다중화) – 수신 측**

- **수신된 데이터를 올바른 애플리케이션으로 전달하는 과정.**
- 패킷을 수신한 후, **포트 번호(Port Number)**를 확인하여 해당 애플리케이션으로 전달.
- 예: 웹 브라우저(포트 80)로 전송된 데이터는 Chrome이나 Firefox로 전달되고, 이메일 데이터(포트 25)는 이메일 클라이언트(Outlook)로 전달됨.

##### **💡 Real-Life Example (실생활 예시)**

> **Multiplexing은 택배 상자가 여러 개의 목적지 주소(포트 번호)를 포함하여 배송 센터로 가는 것**과 같고,  
> **Demultiplexing은 배송 센터에서 상자를 목적지(올바른 애플리케이션)로 배달하는 과정**과 같다.

---

## **3.2.2 Transport Layer Identifiers (전송 계층에서 데이터 식별)**

### **설명 (Explanation)**

전송 계층에서 데이터를 올바른 애플리케이션으로 전달하기 위해 **4가지 정보**가 필요하다.

|**Identifier**|**설명**|
|---|---|
|**Source IP Address (출발지 IP 주소)**|데이터가 출발한 장치의 IP 주소|
|**Destination IP Address (목적지 IP 주소)**|데이터가 도착할 장치의 IP 주소|
|**Source Port Number (출발지 포트 번호)**|송신 측 애플리케이션을 구분하는 번호|
|**Destination Port Number (목적지 포트 번호)**|수신 측 애플리케이션을 구분하는 번호|

##### **💡 Real-Life Example (실생활 예시)**

> **IP 주소는 아파트 주소**와 같고, **포트 번호는 각 집(애플리케이션) 번호**와 같다.
> 
> - `192.168.1.10:80` → 아파트 192.168.1.10의 **80호 (웹 서버)로 데이터 전송**
> - `192.168.1.10:25` → 같은 주소이지만 **25호 (이메일 서버)로 데이터 전송**

---

## **3.2.3 Types of Multiplexing & Demultiplexing (다중화 및 역다중화 유형)**

### **1️⃣ Connectionless Demultiplexing (비연결형 UDP 역다중화)**

- **UDP(User Datagram Protocol) 기반 데이터 전송**
- 패킷을 받을 때 **목적지 IP + 포트 번호**만 확인 → 연결 상태 유지 없음
- **송신자가 누군지(IP, 포트 번호)를 신경 쓰지 않음**
- 예: DNS(포트 53), VoIP, 온라인 게임

#### **UDP Demultiplexing 예제**

| **데이터그램**                            | **목적지 포트**    | **전달 대상**  |
| ------------------------------------ | ------------- | ---------- |
| `192.168.1.1:5000 → 192.168.1.2:53`  | **53 (DNS)**  | DNS 서버로 전달 |
| `192.168.1.1:6000 → 192.168.1.2:123` | **123 (NTP)** | NTP 서버로 전달 |

##### **💡 Real-Life Example (실생활 예시)**

> **UDP Demultiplexing은 "택배가 출발지 주소를 무시하고 목적지 주소만 보고 배달되는 것"과 같다.**

---

### **2️⃣ Connection-Oriented Demultiplexing (연결형 TCP 역다중화)**

- **TCP(Transmission Control Protocol) 기반 데이터 전송**
- **송신자와 수신자의 IP + 포트 번호 전체를 확인하여 데이터 전달**
- **즉, 같은 포트 번호라도 송신자가 다르면 다른 연결로 처리됨**
- 예: 웹 브라우저(포트 80), 이메일 클라이언트(포트 25)

#### **TCP Demultiplexing 예제**

| **TCP Segment**                     | **출발지 IP:포트** | **목적지 IP:포트** | **전달 대상** |
| ----------------------------------- | ------------- | ------------- | --------- |
| `192.168.1.1:5000 → 192.168.1.2:80` | `5000`        | **80 (HTTP)** | 웹 브라우저(A) |
| `192.168.1.3:6000 → 192.168.1.2:80` | `6000`        | **80 (HTTP)** | 웹 브라우저(B) |

##### **💡 Real-Life Example (실생활 예시)**

> **TCP Demultiplexing은 "호텔 프론트 데스크에서 동일한 방 번호라도 투숙객이 다르면 키를 다르게 주는 것"과 같다.**

---

## **3.2.4 UDP vs. TCP Multiplexing & Demultiplexing (UDP vs. TCP 다중화 및 역다중화 차이점)**

|**기능**|**UDP (비연결형)**|**TCP (연결형)**|
|---|---|---|
|**연결 상태**|없음 (Stateless)|있음 (Stateful)|
|**데이터 확인 방식**|목적지 IP + 포트 번호만 확인|출발지 & 목적지 IP + 포트 번호 확인|
|**애플리케이션 예시**|DNS, VoIP, 온라인 게임|HTTP, 이메일, 파일 전송|

##### **💡 Real-Life Example (실생활 예시)**

> - **UDP Demultiplexing** = 택배 배달 (주소만 확인)
> - **TCP Demultiplexing** = 호텔 체크인 (이름과 방 번호 모두 확인)

---

### **📌 핵심 정리 (Key Takeaways)**

1. **Multiplexing (다중화)**
    
    - 여러 애플리케이션이 동일한 네트워크를 통해 데이터를 전송할 수 있도록 결합.
2. **Demultiplexing (역다중화)**
    
    - 수신된 데이터가 **올바른 애플리케이션(포트 번호 기반)으로 전달되도록 분류**.
3. **UDP vs. TCP Demultiplexing**
    
    - **UDP (비연결형)**: 목적지 포트 번호만 확인 → DNS, VoIP, 온라인 게임
    - **TCP (연결형)**: 출발지 & 목적지 포트 번호 모두 확인 → HTTP, 이메일, FTP

🚀 **한 문장 요약:**  
전송 계층의 **Multiplexing & Demultiplexing**은 **여러 애플리케이션이 동시에 네트워크를 사용할 수 있도록 도와주며**,  
**UDP는 목적지 포트만 확인(빠름), TCP는 출발지+목적지 포트를 모두 확인(신뢰성 높음)**.
